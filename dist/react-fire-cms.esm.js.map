{"version":3,"file":"react-fire-cms.esm.js","sources":["../src/component/Dialog.tsx","../src/ConfigContext.ts","../src/hooks.ts","../src/dialog/MediaSelector.tsx","../src/component/editors/ImageEditor.tsx","../src/component/editors/NumberEditor.tsx","../src/component/Parallax.tsx","../src/component/ImageText.tsx","../src/ReactFireCMS.tsx","../src/component/editors/StringEditor.tsx","../src/component/editors/LongFormEditor.tsx","../src/component/editors/ComponentEditor.tsx","../src/component/DynamicLayout.tsx","../src/component/editors/LinkReferenceEditor.tsx","../src/component/editors/MenuEditor.tsx","../src/component/Editable.tsx","../src/component/DynamicComponent.tsx","../src/dialog/Delete.tsx","../src/component/Deleter.tsx","../src/dialog/Login.tsx","../src/dialog/Logout.tsx"],"sourcesContent":["import React from 'react';\nimport { IoCloseSharp } from 'react-icons/io5';\n\nexport type ButtonType = 'normal' | 'primary' | 'warning';\nexport type Buttons = { label: string, action: Function, type?: ButtonType, disabled?: boolean }[];\n\nexport interface DialogProps {\n  title?: string;\n  open?: boolean;\n  onClose?: () => void;\n  buttons?: Buttons\n};\n\nexport const Dialog: React.FC<DialogProps> = ({title, open, children, buttons, onClose}) => {  \n  return open ? (\n    <>\n      <div className='RFCMS__AntiClick' />\n      <div className='RFCMS__Dialog'>\n        <div className={'RFCMS__Dialog__Header'}>\n          {title}\n          { onClose && <IoCloseSharp onClick={onClose} className={'RFCMS__Dialog__Close'} />}\n        </div>\n        <div className={'RFCMS__Dialog__Content'}>\n          {children}\n        </div>\n        {buttons && \n          <div className={'RFCMS__Dialog__Buttons'}>\n            { buttons?.map(it => \n              <div key={it.label} \n                   className={`${'RFCMS__Dialog__Buttons__Button'} ${it.disabled && 'RFCMS__Dialog__Buttons__Button--disabled'} ${`RFCMS__Dialog__Buttons__Button--${it.type}`}`} \n                   onClick={() => {\n                     if (!it.disabled) { it.action() }\n                   }}>{it.label}</div>)}\n          </div>\n        }\n      </div>\n    </>\n  ) : null;\n}","import { createContext, useContext } from 'react';\nimport { CMSConfig } from './interface/CMSConfig';\n\nexport const ConfigContext = createContext(null as unknown as CMSConfig);\n\nexport const useConfig = () => useContext(ConfigContext);\n","import { useUser as _useUser } from 'reactfire';\nimport { useFirestore, useFirestoreDocData } from 'reactfire';\nimport { doc } from 'firebase/firestore';\nimport { useContext, useMemo } from 'react';\nimport { ConfigContext } from './ConfigContext';\n\nexport const useField = <T = any>(path: string, key: string): T => {\n  const storage = useFirestore();\n  const document = doc(storage, path);\n  const { data } = useFirestoreDocData(document);\n  return useMemo<T>(() => data?.[key], [data]);\n};\n\nexport const useDocument = (path: string) => {\n  const storage = useFirestore();\n  const document = doc(storage, `${path}`);\n  const { data } = useFirestoreDocData(document);\n  console.error(Object.keys(data || {}), data)\n  return { data, pageExists: Object.keys(data || {}).length > 0 };\n} \n\nexport const useConfig = () => useContext(ConfigContext);\n\nexport const useUser = () => {\n  const auth = _useUser();\n  return useMemo(() => ({\n    user: auth?.data,\n    userExists: !!auth?.data?.email,\n  }), [auth]);\n}","import React from 'react';\nimport { listAll, ref, StorageReference, getDownloadURL } from \"firebase/storage\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useStorage } from \"reactfire\";\nimport { Dialog, Buttons } from \"../component/Dialog\"\nimport { useConfig } from '../hooks';\n\nexport interface MediaSelectorProps {\n  onSelect: (url: string) => void;\n}\n\ninterface FirebaseImageProps {\n  image: StorageReference;\n  selected?: boolean;\n  onSelect: (url: string) => void;\n}\n\nconst FirebaseImage: React.FC<FirebaseImageProps> = (props) => {\n  const {image, selected, onSelect } = props;\n  const [url, setUrl] = useState('');\n\n  useEffect(() => {\n    if (!image) return;\n    getDownloadURL(image)\n      .then(setUrl)\n      .catch(console.error)\n  }, [image]);\n\n  return (\n    <div onClick={() => onSelect(url)} \n         className={`RFCMS__MediaSelector__Item ${selected && 'RFCMS__MediaSelector__Item--Selected'}`}>\n      <img src={url} alt={image?.name} className=\"RFCMS__MediaSelector__Item__Image\" />\n      <span className=\"RFCMS__MediaSelector__Item__Text\">{image?.name}</span>\n    </div>\n  );\n}\n\nconst MediaSelector: React.FC<MediaSelectorProps> = ({onSelect}) => {\n  const config = useConfig();\n  const [error, setError] = useState('');\n  const [open, setOpen] = useState(false);\n  const [items, setItems] = useState([] as StorageReference[]);\n  const [selection, setSelection] = useState(-1);\n  const [url, setUrl] = useState('');\n\n  const storage = useStorage();\n\n  const showDialog = useCallback((e) => {\n    e.preventDefault();\n    setOpen(true);\n  }, [setOpen])\n\n  useEffect(() => {\n    if (!open) return;\n    listAll(ref(storage, config.firebase.storage.bucket))\n      .then(r => {\n        setItems(r.items);\n      })\n      .catch(e => setError(e));\n  }, [storage, open])\n\n  const buttons = useMemo<Buttons>(() => {\n    return [\n      { label: 'Cancel', action: () => setOpen(false) },\n      { label: 'Upload', action: () => {} },\n      { label: 'Select', action: () => {\n        onSelect(url);\n        setOpen(false);\n      }, disabled: selection === -1 },\n    ]\n  }, [onSelect, selection, url]);\n\n  return (\n    <div>\n      <button onClick={showDialog}>Select Image</button>\n      { open &&\n        <Dialog buttons={buttons} title=\"Media Gallery\" open={open} onClose={() => setOpen(false)}>\n          { error && <span className=\"RFCMS__TextStyles__Error\">{error}</span> }\n          <div className=\"RFCMS__MediaSelector__Grid\">\n            {\n              items.map((item, index) => (              \n                <FirebaseImage \n                  onSelect={(url) => {\n                    setSelection(index);\n                    setUrl(url);\n                  }} \n                  selected={index === selection} \n                  image={item} />\n              ))\n            }\n          </div>\n        </Dialog>\n      }\n    </div>\n  )\n}\n\nexport default MediaSelector;","import React from 'react';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\nimport MediaSelector from \"../../dialog/MediaSelector\";\n\ninterface ImageEditorProps extends EditorComponentProps<string> {}\n\nconst ImageEditor: React.FC<ImageEditorProps> = ({onUpdate, value}) => {\n  return (\n    <div className=\"RFCMS__Editable__Dialog__Image\">\n      <input \n              onChange={(e) => onUpdate(e.target.value)} \n              value={value} />\n      <MediaSelector onSelect={onUpdate} />\n    </div>\n  );\n\n}\n\nexport default ImageEditor;","import React from 'react';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\n\ninterface NumberEditorProps extends EditorComponentProps<string> {}\n\nconst NumberEditor: React.FC<NumberEditorProps> = ({onUpdate, value}) => {\n  return (\n    <>\n      <input \n              type='number'\n              onChange={(e) => onUpdate(e.target.value)} \n              value={value} />\n    </>);\n\n}\n\nexport default NumberEditor;","import React from 'react';\nimport { createRef, useCallback, useEffect, useState } from \"react\";\nimport { ComponentDefinition } from \"../interface\";\nimport ImageEditor from \"./editors/ImageEditor\";\nimport NumberEditor from \"./editors/NumberEditor\";\n\ninterface ParallaxProps {\n  src: string;\n  zoom: number;\n}\n\nconst Parallax: React.FC<ParallaxProps> = ({src, zoom}) => {\n  const ref = createRef<HTMLDivElement>();\n  const [offset, setOffset] = useState(-1);\n\n  const scrollHandler = useCallback(() => {    \n    const offset = ref.current?.getBoundingClientRect()?.top || 0;\n    const percent = offset / window.innerHeight / 2;\n    setOffset(percent - 1);\n  }, [ref])\n\n  useEffect(() => { \n    window.addEventListener('scroll', scrollHandler);\n    return () => { window.removeEventListener('scroll', scrollHandler)}\n  }, [scrollHandler]);\n\n  return (\n    <div ref={ref} className=\"RFCMS__Parallax\">\n      <div className=\"RFCMS__Parallax__Inner\" \n           style={{backgroundImage: `url(${src})`, \n                  width: `100%`,\n                  height: `calc(100% + ${zoom * 2}px)`,\n                  backgroundPositionY: `calc(${zoom * offset}px)`,\n                  }}/>\n\n    </div>\n  )\n}\n\nexport const ParallaxDefinition: ComponentDefinition = {\n  name: 'Parallax',\n  key: 'parallax',\n  component: Parallax,\n  Editor: ({onDataSet, data}) => {\n    const update = (src?: string, zoom?: string) => {\n      onDataSet({\n        src: src || data.src, \n        zoom: zoom || data.zoom\n      });\n    };\n\n    return (\n      <div className=\"RFCMS__EditorStyles__Editor__Form\">\n        <span>Source</span>\n        <ImageEditor value={data?.src} onUpdate={s => update(s)} />\n        <span>Zoom</span>\n        <NumberEditor value={data?.zoom} onUpdate={z => update(undefined, z)} />\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { ComponentDefinition } from \"../interface/ComponentDefinition\";\nimport ImageEditor from './editors/ImageEditor';\n\ninterface ImageTextProps {\n  src: string;\n  imageStyle?: any;\n  textStyle?: any;\n  imageClass?: string;\n  textClass?: string;\n  alt?: string;\n  style?: any;\n}\n\nexport const ImageText: React.FC<ImageTextProps> = ({alt, style, imageStyle, textStyle, imageClass, textClass, src}) => {\n  if (src?.startsWith('http')) {\n    return <img src={src} style={{...style, ...imageStyle}} className={imageClass} alt={alt} />\n  } else {\n    return <span style={{...style, ...textStyle}} className={textClass}>{src}</span>\n  }\n}\n\nexport const ImageTextDefinition: ComponentDefinition = {\n  name: 'Image / Text',\n  key: 'imageText',\n  component: ImageText,\n  Editor: ({onDataSet, data}) => (\n    <div className=\"RFCMS__EditorStyles__Editor__Form\">\n      <span>Image URL / Text</span>\n      <ImageEditor value={data} onUpdate={onDataSet} />\n    </div>\n  )  \n}\n","import React from 'react';\nimport { FirebaseAppProvider, DatabaseProvider, AuthProvider, StorageProvider, FirestoreProvider, useFirebaseApp } from 'reactfire';\nimport { getAuth } from 'firebase/auth';\nimport { getDatabase } from 'firebase/database';\nimport { getStorage } from 'firebase/storage';\nimport { getFirestore } from 'firebase/firestore';\n\nimport { ParallaxDefinition } from './component/Parallax';\nimport { ImageTextDefinition } from './component/ImageText';\nimport { CMSConfig } from \"./interface/CMSConfig\"\nimport { useConfig } from './hooks';\nimport { ConfigContext } from './ConfigContext';\n\ninterface ReactFireCMSProps {\n  config: CMSConfig;\n}\n\nconst mergeConfig = (config: CMSConfig) => ({\n  ...config,\n  components: [\n    ...config.components,\n    ParallaxDefinition,\n    ImageTextDefinition,   \n  ]\n})\n\nconst FirebaseProvider: React.FC = ({children}) => {\n  const firebaseConfig = useConfig();\n  return (\n    <FirebaseAppProvider firebaseConfig={firebaseConfig.firebase.config}>\n      {children}\n    </FirebaseAppProvider>\n  )\n}\n\nconst FirebaseComponents: React.FC = ({children}) => {\n  const app = useFirebaseApp();\n  const database = getDatabase(app);\n  const auth = getAuth(app);\n  const store = getStorage(app);\n  const firestore = getFirestore(app);\n\n  return (\n    <AuthProvider sdk={auth}>\n      <DatabaseProvider sdk={database}>\n        <StorageProvider sdk={store}>\n          <FirestoreProvider sdk={firestore}>\n            {children}\n          </FirestoreProvider>\n        </StorageProvider>\n      </DatabaseProvider>\n    </AuthProvider>\n  )\n}\n\nexport const ReactFireCMS: React.FC<ReactFireCMSProps> = ({config, children}) => {\n  if (true) return (\n    <ConfigContext.Provider value={mergeConfig(config)}>\n      <FirebaseProvider>\n        <FirebaseComponents>\n          {children}\n        </FirebaseComponents>\n      </FirebaseProvider>\n    </ConfigContext.Provider>\n  );\n}","import React from 'react';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\n\ninterface StringEditorProps extends EditorComponentProps<string> {}\n\nconst StringEditor: React.FC<StringEditorProps> = ({onUpdate, value}) => {\n  return (\n    <>\n      <input \n              onChange={(e) => onUpdate(e.target.value)} \n              value={value} />\n    </>);\n\n}\n\nexport default StringEditor;","import React from 'react';\nimport { ContentState, convertToRaw, EditorState } from 'draft-js';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\nimport draftToHtml from 'draftjs-to-html';\nimport htmlToDraft from 'html-to-draftjs';\n\ninterface LongFormEditorProps extends EditorComponentProps<string> {}\n\nconst LongFormEditor: React.FC<LongFormEditorProps> = ({onUpdate, value}) => {\n  const blocks = htmlToDraft(value);\n  const state = ContentState.createFromBlockArray(\n    blocks.contentBlocks,\n    blocks.entityMap\n  );\n  const editorState = EditorState.createWithContent(state)  \n\n  return (\n    <>\n      <div className=\"RFCMS__Editable__Dialog__RichEditor\">\n        <Editor \n                defaultEditorState={editorState}\n                onEditorStateChange={(e: any) => {\n                  onUpdate(draftToHtml(convertToRaw(e.getCurrentContent())))\n                }}/>\n      </div>\n    </>\n  ) \n}\n\nexport default LongFormEditor;","import React from 'react';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\nimport { useConfig } from \"../../hooks\";\nimport { DescribeDynamicComponent } from '../../interface/DescribeDynamicComponent';\n\ninterface ComponentEditorProps extends EditorComponentProps<DescribeDynamicComponent> {}\n\nconst ComponentEditor: React.FC<ComponentEditorProps> = ({onUpdate, value}) => {\n  const config = useConfig();\n  \n  const component = value?.component\n  const props = value?.props\n\n  const update = (component?: string, props?: any) => {\n    onUpdate({\n      component: component || value?.component,\n      props: props || value?.props\n    });\n  }\n\n  const Editor = config.components.find(it => it.key === component)?.Editor;\n\n  return (\n    <>\n      <select value={component} onChange={e => update(e.target.value)}>\n        <option>Select a Component</option>\n        { config.components.map((c, i) => <option key={`${c.key}_${i}`} value={c.key}>{c.name}</option>)}\n      </select>\n      { Editor && <Editor onDataSet={(data) => update(undefined, data)} data={props} />}\n    </>);\n\n}\n\nexport default ComponentEditor;","import React, { useCallback } from 'react';\nimport { IoCloseCircle } from 'react-icons/io5';\nimport { DynamicComponent, DynamicComponentDefinition } from '..';\nimport { ComponentDefinition, DynamicLayoutCell } from '../interface';\nimport StringEditor from './editors/StringEditor';\n\nexport interface DynamicLayoutProps {\n  cells?: DynamicLayoutCell[]\n}\n\nexport const DynamicLayout: React.FC<DynamicLayoutProps> = ({cells}) => {\n  return (\n    <>\n      {cells?.map?.(comp => <DynamicComponent content={comp.description} />)}\n    </>\n  )\n}\n\nexport const DynamicLayoutDefinition: ComponentDefinition<DynamicLayoutCell[]> = {\n  name: 'DynamicLayout',\n  key: 'dynamicLayout',\n  component: DynamicLayout,\n  Editor: ({onDataSet, data}) => {  \n    const addRow = useCallback(e => {\n      e.preventDefault();\n      onDataSet([...(data || []), {\n        description: { component: undefined, props: {} },\n        size: '100%',\n      }]);\n    }, [data]);\n\n    const removeItemAt = useCallback((index: number) => {\n      const after = [...data.slice(0,index), ...data.slice(index+1)];\n      onDataSet(after)\n    }, [data]);\n    \n    const replaceItemAt = useCallback((index: number, description: any, size?: string) => {\n      const after = [\n        ...data.slice(0,index), \n        { \n          description: description || data[index].description,\n          size: size || data[index].size,\n        }, \n        ...data.slice(index+1)];\n      onDataSet(after)\n    }, [data]);\n\n    return (\n      <div className=\"RFCMS__EditorStyles__Editor__Form\">\n        <button onClick={addRow}>Add Row</button>\n        <div>\n          {\n            data?.map((it, index) => \n              <div key={`${index}_`} className=\"RFCMS__DynamicLayout__Editor\">\n                <div className=\"RFCMS__DynamicLayout__Editor__Header\">\n                  <label>Size (See guide for accepted formats)</label>\n                  <StringEditor value={it.size} onUpdate={data => replaceItemAt(index, undefined, data)} />\n                  <IoCloseCircle className=\"RFCMS__DynamicLayout__Editor__Header__Delete\" onClick={() => removeItemAt(index)} />\n                </div>\n                <DynamicComponentDefinition.Editor                   \n                  onDataSet={(data) => replaceItemAt(index, data)} \n                  data={it.description} \n                />\n              </div>\n            )\n          }\n        </div>\n      </div>\n    )\n  }\n}\n","import React from 'react';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\nimport { LinkReference } from '../../interface/LinkReference';\n\ninterface StringEditorProps extends EditorComponentProps<LinkReference> {}\n\nexport const LinkReferenceEditor: React.FC<StringEditorProps> = ({onUpdate, value}) => {\n  const updateValue = (content?: string, url?: string) => {\n    onUpdate({\n      content: content || value.content,\n      url: url || value.url,\n    })\n  }\n  return (\n    <>\n      <input \n              onChange={(e) => updateValue(e.target.value)} \n              value={value.content} />\n      <input \n              onChange={(e) => updateValue(undefined, e.target.value)} \n              value={value.url} />\n    </>);\n\n}\n\nexport default LinkReferenceEditor;","import React, { useCallback } from 'react';\nimport { IoCloseCircle } from 'react-icons/io5';\nimport { EditorComponentProps } from '../../interface/EditorComponentProps';\nimport { LinkReference } from '../../interface/LinkReference';\nimport LinkReferenceEditor from './LinkReferenceEditor';\n\ninterface MenuEditorProps extends EditorComponentProps<LinkReference[]> {}\n\nexport const MenuEditor: React.FC<MenuEditorProps> = ({onUpdate, value}) => {\n  const addRow = useCallback(e => {\n    e.preventDefault();\n    onUpdate([...(value || []), {\n      url: '',\n      content: '',\n    }]);\n  }, [value]);\n\n  const removeItemAt = useCallback((index: number) => {\n    const after = [...value.slice(0,index), ...value.slice(index+1)];\n    onUpdate(after)\n  }, [value]);\n  \n  const replaceItemAt = useCallback((index: number, data: LinkReference) => {\n    const after = [\n      ...value.slice(0,index), \n      { \n        ...data\n      },\n      ...value.slice(index+1)];\n      onUpdate(after)\n  }, [value]);\n\n  return (\n    <div className=\"RFCMS__EditorStyles__Editor__Form\">\n      <button onClick={addRow}>Add Menu Item</button>\n      <div>\n        {\n          value?.map((it, index) => \n            <div key={`${index}_`} className=\"RFCMS__MenuEditor__Editor\">\n              <div className=\"RFCMS__MenuEditor__Editor__Row\">\n                <LinkReferenceEditor               \n                  onUpdate={(data) => replaceItemAt(index, data)} \n                  value={it} \n                />\n                <IoCloseCircle className=\"RFCMS__DynamicLayout__Editor__Header__Delete\" onClick={() => removeItemAt(index)} />\n              </div>\n            </div>\n          )\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default MenuEditor;\n\n","import React from 'react';\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { FormEvent, useCallback, useEffect, useState } from \"react\";\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\nimport { FaPencilAlt } from \"react-icons/fa\";\nimport { useUser, useFirestore, useFirestoreDocData } from \"reactfire\";\nimport { Dialog, Buttons, DialogProps } from \"./Dialog\";\nimport StringEditor from \"./editors/StringEditor\";\nimport LongFormEditor from \"./editors/LongFormEditor\";\nimport ComponentEditor from \"./editors/ComponentEditor\";\nimport { ImageTextDefinition } from '..';\nimport { DynamicLayoutDefinition } from './DynamicLayout';\nimport MenuEditor from './editors/MenuEditor';\nimport LinkReferenceEditor from './editors/LinkReferenceEditor';\n\nexport type FieldType = 'string' | 'longform' | 'boolean' | 'image' | \n                        'component' | 'dynamicLayout' | 'menu' | 'url';\n\nexport interface EditorField {\n  name: string,\n  hint?: string,\n  type: FieldType,\n}\n\nexport type OnDataSet = (data: string) => void;\n\ninterface EditableProps {\n  fields: EditorField[]\n  path: string,\n  style?: any,\n  className?: any,\n}\n\ninterface EditableDialogProps extends DialogProps {\n  fields: EditorField[],\n  path: string,\n}\n\nconst EditableDialog: React.FC<EditableDialogProps> = ({open, fields, path, onClose}) => {\n  const firestore = useFirestore();\n  const document = doc(firestore, path);\n  const data = useFirestoreDocData(document);\n  const [error, setError] = useState('')\n  const [toSubmit, setToSubmit] = useState({} as {[key:string]: any})\n\n  useEffect(() => {\n    setToSubmit(\n      fields.reduce((p, c) => {\n        const current = p;\n        current[c.name] = data.data?.[c.name] || undefined;\n        return current;\n      }, {} as {[key:string]: any})\n    )\n  }, [fields, data]);\n\n  const submitChanges = (e?: FormEvent) => {\n    e?.preventDefault();\n    console.error('Submitting: ', toSubmit);\n\n    setDoc(document, toSubmit, {merge: true})\n      .then(onClose)\n      .catch((e) => setError(e));\n  }\n\n  const updateField = useCallback((name: string, value: any) => {\n    const copy = {...toSubmit};\n    copy[name] = value;\n    setToSubmit(copy);\n  }, [toSubmit]);\n\n  const buttons: Buttons = [\n    { label: 'Cancel', action: () => onClose?.()},\n    { label: 'Save', action: submitChanges },\n  ]\n\n  const renderEditor = (field: EditorField) => {\n    switch (field.type) {\n      case 'string':\n        return <StringEditor onUpdate={v => updateField(field.name, v)} value={toSubmit[field.name]} />\n      case 'image':\n        return <ImageTextDefinition.Editor onDataSet={v => updateField(field.name, v)} data={toSubmit[field.name]} />\n      case 'longform':\n        return <LongFormEditor onUpdate={v => updateField(field.name, v)} value={toSubmit[field.name]} />\n      case 'component':\n        return <ComponentEditor onUpdate={v => updateField(field.name, v)} value={toSubmit[field.name]} />\n      case 'dynamicLayout': \n        return <DynamicLayoutDefinition.Editor onDataSet={v => updateField(field.name, v)} data={toSubmit[field.name]} />  \n      case 'url':\n        return <LinkReferenceEditor onUpdate={v => updateField(field.name, v)} value={toSubmit[field.name]} />\n      case 'menu':\n        return <MenuEditor onUpdate={v => updateField(field.name, v)} value={toSubmit[field.name]} />\n      default:\n        return <></>;  \n    }\n  }\n\n  return (\n    <Dialog title=\"Edit Fields\" {...{onClose, open}} buttons={buttons}>\n      { open && (\n        <form className=\"RFCMS__Editable__Dialog\" onSubmit={submitChanges}>\n        <span className='Text__Error'>{error}</span>\n        {\n          fields?.map(field => (\n            <div key={field.name} className=\"RFCMS__Editable__Dialog__Field\">\n              <div className=\"RFCMS__Editable__Dialog__Label\">\n                {field.hint || field.name}\n              </div>\n              { renderEditor(field) }\n            </div>\n          ))\n        }\n      </form>\n      )\n    }\n    </Dialog>\n  )\n}\n\nexport const Editable: React.FC<EditableProps> = ({fields, style, path, className, children}) => {\n  const user = useUser();\n  const [shown, setShown] = useState(false);\n  const [highlight, setHighlight] = useState(false);\n  const [preview, setPreview] = useState(false);\n\n  useHotkeys('e', () => { setHighlight(true) });\n  useHotkeys('e', () => { setHighlight(false) }, { keydown: false, keyup: true });\n  useHotkeys('p', () => { setPreview(true) });\n  useHotkeys('p', () => { setPreview(false) }, { keydown: false, keyup: true });\n\n  return user.data ? (\n    <div style={style} className={`${className} RFCMS__Editable ${preview && 'RFCMS__Editable--Preview'}`}>\n      {children}\n      <EditableDialog path={path} open={shown} fields={fields} onClose={() => setShown(false)} />\n      <div className={`RFCMS__Editable__Pencil ${highlight && 'RFCMS__Editable__Pencil--Highlight'} ${preview && 'RFCMS__Editable__Pencil--Preview'}`}>\n        <FaPencilAlt onClick={() => setShown(true)} className=\"RFCMS__Editable__Pencil__Text\" />\n      </div>\n    </div>\n  ) : (<>{children}</>)\n}","import React from 'react';\nimport { useConfig } from '../hooks';\nimport { ComponentDefinition } from '../interface/ComponentDefinition';\nimport { DescribeDynamicComponent } from '../interface/DescribeDynamicComponent';\nimport ComponentEditor from './editors/ComponentEditor';\n\ninterface DynamicComponentProps {\n  content: DescribeDynamicComponent;\n  className?: string;\n  style?: string;\n}\n\nexport const DynamicComponent: React.FC<DynamicComponentProps> = ({content, className, style}) => {\n  const config = useConfig();\n  const component = content?.component;\n  const props = (content?.props || {}) as DescribeDynamicComponent;\n  const Component = config.components.find(it => it.key === component)?.component;\n\n  return (\n    Component ? <Component {...props} className={className} style={style} /> : <></>\n  )\n}\n\nexport const DynamicComponentDefinition: ComponentDefinition = {\n  name: 'Dynamic Component',\n  key: 'dynamicComponent',\n  component: DynamicComponent,\n  Editor: ({onDataSet, data}) => {\n    return (\n      <div className=\"RFCMS__EditorStyles__Editor__Form\">\n        <span>Component</span>\n        <ComponentEditor value={data} onUpdate={onDataSet} />\n      </div>\n    )\n  }\n}","import React from 'react';\nimport { useCallback } from 'react';\nimport { Dialog, Buttons, DialogProps } from '../component/Dialog'\n\nexport interface LogoutProps extends DialogProps {\n  identity: string;\n  onDelete: () => Promise<void>;\n}\n\nexport const Delete: React.FC<LogoutProps> = ({open, identity, onClose, onDelete}) => {\n  const doDelete = useCallback(() => {\n    onDelete().then(onClose);  \n  }, [onDelete, onClose]);\n\n  const buttons: Buttons = [\n    { label: 'Cancel', action: () => onClose?.() }, \n    { label: 'Delete', action: doDelete, type: 'warning' }\n  ];\n  \n  return (\n    <Dialog \n      title={`Delete ${identity}`} \n      open={open} \n      onClose={onClose}\n      buttons={buttons}>\n      Do you wish to delete {identity}\n    </Dialog>\n  )\n}\n","import { deleteDoc, doc } from 'firebase/firestore';\nimport React from 'react';\nimport { useState } from \"react\";\nimport { useHotkeys } from \"react-hotkeys-hook\";\nimport { FaTrash } from 'react-icons/fa';\nimport { useFirestore } from 'reactfire';\nimport { DialogProps } from '..';\nimport { Delete } from '../dialog/Delete';\nimport { useUser } from \"../hooks\";\n\nexport interface DeleterProps extends DialogProps {\n  path: string;\n  style?: any;\n  className?: any;\n}\n\nexport const Deleter: React.FC<DeleterProps> = ({style, className, path, children}) => {\n  const { userExists } = useUser();\n  const [shown, setShown] = useState(false);\n  const [highlight, setHighlight] = useState(false);\n  const [preview, setPreview] = useState(false);\n\n  const firestore = useFirestore();\n\n  useHotkeys('e', () => { setHighlight(true) });\n  useHotkeys('e', () => { setHighlight(false) }, { keydown: false, keyup: true });\n  useHotkeys('p', () => { setPreview(true) });\n  useHotkeys('p', () => { setPreview(false) }, { keydown: false, keyup: true });\n\n  return userExists ? (\n    <div style={style} className={`${className} RFCMS__Editable ${preview && 'RFCMS__Editable--Preview'}`}>\n      <Delete open={shown} identity=\"this page\" onClose={() => setShown(false)} onDelete={() => deleteDoc(doc(firestore, path))}/>\n      <div className={`RFCMS__Editable__Trash ${highlight && 'RFCMS__Editable__Trash--Highlight'}  ${preview && 'RFCMS__Editable__Pencil--Preview'}`}>\n        <FaTrash onClick={() => setShown(true)} className=\"RFCMS__Editable__Pencil__Text\" />\n      </div>\n    </div>\n  ) : (<>{children}</>)\n}","import React from 'react';\nimport { signInWithEmailAndPassword, setPersistence, browserSessionPersistence } from 'firebase/auth';\nimport { useCallback, useState } from 'react';\nimport { useAuth } from 'reactfire'\nimport { Dialog, Buttons, DialogProps } from '../component/Dialog'\n\nexport interface LoginProps extends DialogProps {}\n\nexport const Login: React.FC<LoginProps> = ({open, onClose}) => {\n  const auth = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const doLogin = useCallback((e) => {\n    e?.preventDefault();\n    setPersistence(auth, browserSessionPersistence)\n      .then(() => signInWithEmailAndPassword(auth, email, password)) \n      .then(onClose)\n  }, [email, password, auth, onClose]);\n\n  const buttons: Buttons = [\n    {label: 'Login', action: doLogin}\n  ]\n  return (\n    <Dialog title=\"Login\" open={open} onClose={onClose} buttons={buttons}>\n      <form onSubmit={doLogin}\n            className=\"RFCMS__LoginDialog__Content\">\n        <label htmlFor=\"email\">Email</label>\n        <input value={email} onChange={v => setEmail(v.target.value)} type=\"email\" id=\"email\" />\n        <label htmlFor=\"password\">Password</label>\n        <input value={password} onChange={v => setPassword(v.target.value)} type=\"password\" id=\"password\"/>\n      </form>\n    </Dialog>\n  )\n}\n","import React from 'react';\nimport { signOut, setPersistence, browserSessionPersistence } from 'firebase/auth';\nimport { useCallback } from 'react';\nimport { useAuth } from 'reactfire'\nimport { Dialog, Buttons, DialogProps } from '../component/Dialog'\n\nexport interface LogoutProps extends DialogProps {}\n\nexport const Logout: React.FC<LogoutProps> = ({open, onClose}) => {\n  const auth = useAuth();\n\n  const doLogout = useCallback(() => {\n    setPersistence(auth, browserSessionPersistence)\n      .then(() => signOut(auth))\n      .then(onClose);  \n  }, [auth, onClose]);\n\n  const buttons: Buttons = [\n    { label: 'Cancel', action: () => onClose?.() }, \n    { label: 'Logout', action: doLogout, type: 'warning' }\n  ];\n  \n  return (\n    <Dialog \n      title=\"Login\" \n      open={open} \n      onClose={onClose}\n      buttons={buttons}>\n      Are you sure you wish to logout?\n    </Dialog>\n  )\n}\n"],"names":["Dialog","title","open","children","buttons","onClose","React","className","IoCloseSharp","onClick","map","it","key","label","disabled","type","action","ConfigContext","createContext","useField","path","storage","useFirestore","document","doc","useFirestoreDocData","data","useMemo","useDocument","console","error","Object","keys","pageExists","length","useConfig","useContext","useUser","auth","_useUser","user","userExists","email","FirebaseImage","props","image","selected","onSelect","useState","url","setUrl","useEffect","getDownloadURL","then","src","alt","name","MediaSelector","config","setError","setOpen","items","setItems","selection","setSelection","useStorage","showDialog","useCallback","e","preventDefault","listAll","ref","firebase","bucket","r","item","index","ImageEditor","onUpdate","value","onChange","target","NumberEditor","Parallax","zoom","createRef","offset","setOffset","scrollHandler","current","getBoundingClientRect","top","percent","window","innerHeight","addEventListener","removeEventListener","style","backgroundImage","width","height","backgroundPositionY","ParallaxDefinition","component","Editor","onDataSet","update","s","z","undefined","ImageText","imageStyle","textStyle","imageClass","textClass","startsWith","ImageTextDefinition","mergeConfig","components","FirebaseProvider","firebaseConfig","FirebaseAppProvider","FirebaseComponents","app","useFirebaseApp","database","getDatabase","getAuth","store","getStorage","firestore","getFirestore","AuthProvider","sdk","DatabaseProvider","StorageProvider","FirestoreProvider","ReactFireCMS","Provider","StringEditor","LongFormEditor","blocks","htmlToDraft","state","ContentState","createFromBlockArray","contentBlocks","entityMap","editorState","EditorState","createWithContent","defaultEditorState","onEditorStateChange","draftToHtml","convertToRaw","getCurrentContent","ComponentEditor","find","c","i","DynamicLayout","cells","comp","DynamicComponent","content","description","DynamicLayoutDefinition","addRow","size","removeItemAt","after","slice","replaceItemAt","IoCloseCircle","DynamicComponentDefinition","LinkReferenceEditor","updateValue","MenuEditor","EditableDialog","fields","toSubmit","setToSubmit","reduce","p","submitChanges","setDoc","merge","updateField","copy","renderEditor","field","v","onSubmit","hint","Editable","shown","setShown","highlight","setHighlight","preview","setPreview","useHotkeys","keydown","keyup","FaPencilAlt","Component","Delete","identity","onDelete","doDelete","Deleter","deleteDoc","FaTrash","Login","useAuth","setEmail","password","setPassword","doLogin","setPersistence","browserSessionPersistence","signInWithEmailAndPassword","htmlFor","id","Logout","doLogout","signOut"],"mappings":"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"}